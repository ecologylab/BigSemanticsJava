<meta_metadata_repository name="bib_managing" package="ecologylab.semantics.generated.library.bibManaging" default_user_agent_name="chrome_2">

  <meta_metadata name="citation_info" extends="document" comment="Citation numbers.">
    <scalar name="total_citation" scalar_type="Int" />
    <scalar name="self_citation" scalar_type="Int" />
  </meta_metadata>
  
  
  
  <meta_metadata name="citeseerx_record" extends="scholarly_article" comment="CiteSeerX record for an article.">
    <scalar name="location" xpath="//div[@id='downloads']/a[@title='View or Download this document as PDF']" />
    <scalar name="title" xpath="//h1[@class='primaryheader']" navigates_to="metadata_page">
      <filter regex="\[.*\]" replace="" />
    </scalar>
		<collection name="authors" xpath="//div[@id='introduction']/div[contains(@class, 'char_mediumvalue')]">
      <field_parser name="regex_split" regex="\s*,\s*" />
      <scalar name="name" field_parser_key="$0">
        <filter regex="^by\s+" replace="" />
      </scalar>
    </collection>
    <composite name="citation_info" xpath="//h1[@class='primaryheader']/a">
      <field_parser name="regex_find" regex="(\d+) citations â€” (\d+) self" />
      <scalar name="total_citation" field_parser_key="$1" />
      <scalar name="self_citation" field_parser_key="$2" />
    </composite>
  </meta_metadata>
  
  
  
  <meta_metadata name="citeseerx_summary" extends="citeseerx_record" parser="xpath" comment="Summary page from CiteSeerX.">
    <selector url_stripped="http://citeseerx.ist.psu.edu/viewdoc/summary" />
    
    <scalar name="abstract_field" xpath="//div[@id='main_content']/p" />
    <composite name="source" xpath="//div[@id='right-sidebar']/div/div[2]/div[@class='content']">
      <field_parser name="bibtex" />
  		<scalar name="year_of_publication" field_parser_key="year" />
  		<scalar name="archive_name" field_parser_key="booktitle" />
  		<scalar name="pages" field_parser_key="pages" />
  		<scalar name="isbn" field_parser_key="isbn" />
    </composite>
    
    <collection name="references" xpath="//table[@class='citelist']//a">
      <scalar name="location" xpath="./@href">
        <filter regex=";jsessionid=[A-Za-z0-9]*" replace="" />
      </scalar>
      <scalar name="gist" xpath=".." />
    </collection>
    <scalar name="citation_page" scalar_type="ParsedURL" hide="true" xpath="//div[@id='conclusion']//a[2]/@href">
      <filter regex=";jsessionid=[A-Za-z0-9]*" replace="" />
    </scalar>
    <scalar name="cocitation_page" scalar_type="ParsedURL" hide="true" xpath="//div[@id='conclusion']//a[3]/@href">
      <filter regex=";jsessionid=[A-Za-z0-9]*" replace="" />
    </scalar>

    <semantic_actions>
      <get_field name="location" />
      <if>
        <not_null value="location" />
        <parse_document now="true">
          <arg value="metadata" name="document" />
          <arg value="location" name="container_link" />
        </parse_document>
      </if>

      <get_field name="title" />
      <create_and_visualize_text_surrogate>
        <arg value="title" name="text" />
      </create_and_visualize_text_surrogate>

      <get_field name="references" />
      <if>
        <not_null value="references" />
        <for_each collection="references" as="ref">
          <get_field object="ref" name="gist" />
          <parse_document now="true">
            <arg value="true" name="citation_sig" />
            <arg value="gist" name="anchor_text" />
            <arg value="ref" name="entity" />
          </parse_document>
        </for_each>
      </if>

      <get_field name="citation_page" />
      <if>
        <not_null value="citation_page" />
        <parse_document now="true">
          <arg value="citation_page" name="container_link" />
        </parse_document>
      </if>

      <get_field name="cocitation_page" />
      <if>
        <not_null value="cocitation_page" />
        <parse_document now="true">
          <arg value="cocitation_page" name="container_link" />
        </parse_document>
      </if>
    </semantic_actions>
  </meta_metadata>
  
  
  
  <meta_metadata name="citeseerx_similar" extends="citeseerx_record" parser="xpath" comment="Citation or co-citation page from CiteSeerX.">
    <selector url_stripped="http://citeseerx.ist.psu.edu/viewdoc/similar" />
    
    <collection name="citations" xpath="//table[@class='citelist']//a">
      <scalar name="location" xpath="./@href">
        <filter regex=";jsessionid=[A-Za-z0-9]*" replace="" />
      </scalar>
      <scalar name="gist" xpath=".." />
    </collection>
    
    <semantic_actions>
      <get_field name="citations" />
      <if>
        <not_null value="citations" />
        <for_each collection="citations" as="cite">
          <get_field object="cite" name="gist" />
          <parse_document now="true">
            <arg value="true" name="citation_sig" />
            <arg value="gist" name="anchor_text" />
            <arg value="cite" name="entity" />
          </parse_document>
        </for_each>
      </if>
    </semantic_actions>
  </meta_metadata>
  
  
  
  <meta_metadata name="citeseerx_search" extends="search" parser="xpath" comment="CiteSeerX search using keywords.">
    <selector url_stripped="http://citeseerx.ist.psu.edu/search" />
    
    <collection name="search_results" xpath="//div[@class='searchresult'][1]/div">
      <scalar name="heading" xpath=".//a[contains(@class, 'doc_details')]" />
      <scalar name="snippet" xpath=".//li[2]" />
      <scalar name="link" xpath=".//a[contains(@class, 'doc_details')]/@href">
        <filter regex=";jsessionid=[A-Za-z0-9]*" replace="" />
      </scalar>
    </collection>
    
    <semantic_actions>
      <get_field name="search_results" />
      <for_each collection="search_results" as="res">
        <get_field name="link" object="res" />
        <parse_document now="true">
          <arg name="container_link" value="link" />
        </parse_document>
      </for_each>
    </semantic_actions>
  </meta_metadata>
  
  
  
  <meta_metadata name="citeseerx_citing" type="citeseerx_search" comment="CiteSeerX citing results.">
    <selector url_stripped="http://citeseerx.ist.psu.edu/showciting" />
    
    <collection name="search_results" />
    
    <semantic_actions>
      <get_field name="search_results" />
      <for_each collection="search_results" as="res">
        <get_field name="link" object="res" />
        <parse_document now="true">
          <arg name="container_link" value="link" />
        </parse_document>
      </for_each>
    </semantic_actions>
  </meta_metadata>
  
</meta_metadata_repository>
